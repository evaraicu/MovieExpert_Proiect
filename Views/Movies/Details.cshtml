@model MovieExpert_Proiect.Models.Movie

@{
    ViewData["Title"] = "Detalii Film";
}

<h1>Detalii</h1>

<div>
    <h4>Filmul: @Model.Title</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Title)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Title)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ReleaseYear)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.ReleaseYear)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.RuntimeMinutes)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.RuntimeMinutes) min
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.IMDBRating)
        </dt>
        <dd class="col-sm-10">
            <span class="badge bg-warning text-dark">@Html.DisplayFor(model => model.IMDBRating)</span>
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.PosterUrl)
        </dt>
        <dd class="col-sm-10">
            @if (!string.IsNullOrEmpty(Model.PosterUrl))
            {
                <img src="@Model.PosterUrl" alt="Poster" style="max-height: 250px; border-radius: 8px; margin-bottom: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" />
                <br />
            }
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Overview)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Overview)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Genre)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Genre.Name)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Director)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Director.Name)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Actor)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Actor.Name)
        </dd>
    </dl>
</div>

<hr />
<div class="mt-4">
    <h3>Recenzii Utilizatori</h3>

    @if (Model.Reviews != null && Model.Reviews.Any())
    {
        <div class="table-responsive">
            <table class="table table-striped table-hover mt-3">
                <thead class="table-dark">
                    <tr>
                        <th>Utilizator</th>
                        <th>Comentariu</th>
                        <th>Notă</th>
                        <th>Data</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var review in Model.Reviews.OrderByDescending(r => r.ReviewDate))
                    {
                        <tr>
                            <td><strong>@review.UserName</strong></td>
                            <td>@review.Content</td>
                            <td>
                                <span class="badge bg-info text-dark">@review.Rating / 10</span>
                            </td>
                            <td>@review.ReviewDate.ToString("dd.MM.yyyy")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div class="alert alert-light">
            Nu există încă recenzii pentru acest film. Fii primul care adaugă una!
        </div>
    }
</div>

<div class="mt-4 mb-5">
    <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-warning">Editează Film</a> |
    <a asp-action="Index" class="btn btn-secondary">Înapoi la Listă</a>
</div>